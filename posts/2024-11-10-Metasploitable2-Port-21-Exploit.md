## Metasploitable2 Port 21 FTP Exploit
**ZM**
**November 10, 2024**

#### Port 21 - FTP
FTP (File Transfer Protocol) is an Application Layer protocol in the TCP/IP stack that enables file transfers between remote hosts. Key commands include GET and PUT for retrieving and uploading files, and CLOSE and QUIT for ending the session. FTP is not secure as it transmits everything in plaintext. It can also be backdoored easily.  

#### FTP Backdoor Exploit (CVE-2011-2523)
Port 21 is open and running `vsftpd 2.3.4`, which is vulnerable to the backdoor exploit CVE-2011-2523. Opens a backdoor when a specially formatted username is used. 

#### High-Level Strategy for Exploitation
1. Confirm that `vsftpd 2.3.4` is running with an `nmap` scan.
2. If running this specific version, use CVE-2011-2523.
3. Gain reverse shell access .

#### Walkthrough
On kali, launch Metasploit with `msfconsole:`

![Launch Metasploit](/assets/img/MS2_21_IMG1.png)

Next we need to search for the exploit, enter `search vsftpd 2.3.4`:

![Search vsftpd 2.3.4](/assets/img/MS2_21_IMG2.png)

Once we successfully find a matching exploit, we need to select it by either name or number. Enter `use 0` or `use exlploit/unix/ftp/vsftpd_234_backdoor`:

![Select exploit](/assets/img/MS2_21_IMG3.png)

Now, we need to see what parameters the exploit needs by running: 
`show options`

![Show options](/assets/img/MS2_21_IMG4.png)

Here we see that we need to specify `RHOSTS`. The rest of the options are optional. We see that RPORT's Current Setting is 21, so all we need is to give the IP address of the target host. Use the following command to set the remote host:
`set RHOST <targetIP>`

Now we are ready to use the exploit. Simply run `exploit`:

![Launch the exploit](/assets/img/MS2_21_IMG5.png)

We have successfully opened a shell on the target host! Now we can interact with the target through a command line. Run `whoami` to determine your current user priveleges. 

![Check whoami](/assets/img/MS2_21_IMG6.png)

We see that we already have root privilege, so we have full access to the target host!
